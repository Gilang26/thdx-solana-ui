<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Wormhole Bridge Simulator | Sepolia ‚Üî Monad</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <style>
    body {
      background:#0b1220;
      color:#e6edf3;
      font-family:system-ui,Arial,sans-serif;
      margin:0;
      display:grid;
      place-items:center;
      height:100vh;
    }
    .card {
      background:#121a2a;
      border:1px solid #22304a;
      border-radius:12px;
      padding:24px;
      width:min(430px,90vw);
      text-align:center;
      box-shadow:0 0 12px rgba(0,0,0,0.3);
    }
    h2 { color:#8b5cf6; margin-top:0; }
    select,input,button {
      width:100%;
      padding:12px;
      border-radius:10px;
      border:0;
      margin-top:10px;
      font-size:15px;
    }
    button { cursor:pointer; font-weight:700; transition:0.2s; }
    #connect { background:linear-gradient(90deg,#6ee7ff,#7c5cff); }
    #bridge { background:linear-gradient(90deg,#22c55e,#15803d); }
    pre {
      background:#0f1625;
      border:1px solid #22304a;
      border-radius:10px;
      padding:10px;
      text-align:left;
      font-size:13px;
      white-space:pre-wrap;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>üåâ Wormhole Bridge Simulator</h2>
    <p>Bridge USDC Testnet dari Sepolia ‚Üí Monad</p>

    <button id="connect">üîå Connect Wallet</button>
    <select id="network">
      <option value="sepolia">Sepolia ‚Üí Monad</option>
      <option value="monad">Monad ‚Üí Sepolia</option>
    </select>

    <input id="amount" type="number" placeholder="Jumlah USDC (misal: 10.5)" />
    <button id="bridge" disabled>üöÄ Simulate Bridge</button>
    <pre id="log">Log siap...</pre>
  </div>

  <script>
    const log = (m) => {
      const el = document.getElementById("log");
      el.textContent += "\\n" + m;
      el.scrollTop = el.scrollHeight;
      console.log(m);
    };

    const CONFIG = {
      sepolia: {
        name: "Sepolia",
        chainId: 11155111,
        rpc: "https://ethereum-sepolia-rpc.publicnode.com",
        usdc: "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",
        bridge: "0x6c5aAE4622B835058A41879bA5e128019B9047d6",
        dst: "Monad",
      },
      monad: {
        name: "Monad",
        chainId: 4242,
        rpc: "https://testnet-rpc.monad.xyz",
        usdc: "0xf817257fed379853cDe0fa4F97AB987181B1E5Ea",
        bridge: "0x6c5aAE4622B835058A41879bA5e128019B9047d6",
        dst: "Sepolia",
      },
    };

    let provider, signer, user;

    async function connectWallet() {
      const btn = document.getElementById("connect");
      try {
        if (!window.ethereum) throw new Error("MetaMask / OKX Wallet tidak ditemukan");
        btn.disabled = true; btn.textContent = "‚è≥ Connecting...";
        provider = new ethers.providers.Web3Provider(window.ethereum, "any");
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        user = await signer.getAddress();
        const net = await provider.getNetwork();
        log(`‚úÖ Connected: ${user}\\nChain: ${net.chainId}`);
        btn.textContent = "‚úÖ Wallet Connected";
        document.getElementById("bridge").disabled = false;
      } catch (e) {
        log("‚ùå Connect error: " + e.message);
        btn.disabled = false; btn.textContent = "üîå Connect Wallet";
      }
    }

    async function simulateBridge() {
      const mode = document.getElementById("network").value;
      const amount = parseFloat(document.getElementById("amount").value);
      if (!amount || amount <= 0) return log("‚ö†Ô∏è Masukkan jumlah yang valid");

      const cfg = CONFIG[mode];
      log(`üöÄ Simulasi bridge dari ${cfg.name} ‚Üí ${cfg.dst}`);
      log(`üí∞ Token: ${cfg.usdc}`);
      log(`ü™Ñ Bridge Contract: ${cfg.bridge}`);
      log(`üì¶ Jumlah: ${amount} USDC`);

      // Simulasi langkah-langkah bridge
      log("1Ô∏è‚É£ Approve bridge contract...");
      await new Promise(r => setTimeout(r, 1000));

      log("2Ô∏è‚É£ Locking token di " + cfg.name + "...");
      await new Promise(r => setTimeout(r, 1500));

      log("3Ô∏è‚É£ Menerima pesan Wormhole (VAA)...");
      await new Promise(r => setTimeout(r, 1500));

      log("4Ô∏è‚É£ Minting token di " + cfg.dst + "...");
      await new Promise(r => setTimeout(r, 1200));

      log(`‚úÖ Bridge sukses secara simulasi!`);
      log(`üéØ ${amount} USDC dari ${cfg.name} berhasil muncul di ${cfg.dst}`);
    }

    document.getElementById("connect").onclick = connectWallet;
    document.getElementById("bridge").onclick = simulateBridge;
  </script>
</body>
</html>
