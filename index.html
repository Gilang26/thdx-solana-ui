<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>THDX ‚Ä¢ Solana Sender UI</title>
  <style>
    body{background:#0b1220;color:#e6edf3;font-family:system-ui,Arial,sans-serif;margin:0;display:grid;place-items:center;height:100vh}
    .card{background:#121a2a;border:1px solid #22304a;border-radius:12px;padding:24px;width:min(420px,90vw);text-align:center}
    input,button{width:100%;padding:12px;border-radius:10px;border:0;font-size:15px;margin-top:8px}
    button{cursor:pointer;font-weight:700;transition:.2s}
    #send{background:linear-gradient(90deg,#22c55e,#15803d)}
    pre{white-space:pre-wrap;background:#0f1625;border:1px solid #22304a;border-radius:10px;padding:10px;text-align:left;font-size:13px;margin-top:10px}
  </style>
</head>
<body>
  <div class="card">
    <h2>üí† THDX ‚Ä¢ Solana Sender UI</h2>
    <p>Kirim SOL via API backend (tanpa wallet)</p>
    <input id="receiver" placeholder="Alamat penerima (contoh: 6a8XJs...)" />
    <input id="amount" type="number" placeholder="Jumlah SOL (contoh: 0.01)" />
    <button id="send">üöÄ Kirim</button>
    <pre id="log">Log siap...</pre>
  </div>

  <script>
    const log = (m)=>{
      const el=document.getElementById("log");
      el.textContent+="\n"+m;
      el.scrollTop=el.scrollHeight;
      console.log(m);
    };

    async function sendSol(){
      try{
        const to=document.getElementById("receiver").value.trim();
        const amount=parseFloat(document.getElementById("amount").value);
        if(!to||isNaN(amount)) return log("‚ö†Ô∏è Isi alamat penerima dan jumlah.");

        log("üßæ Mengirim permintaan ke server...");

        const res=await fetch("/api/send-sol",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({to,amount})
        });

        const data=await res.json();
        if(data.error) return log("‚ùå Error: "+data.error);

        log("‚úÖ Transaksi terkirim!");
        log("üîó Explorer: https://explorer.solana.com/tx/"+data.signature+"?cluster=mainnet-beta");
      }catch(e){
        log("‚ùå Error: "+(e.message||e));
      }
    }

    document.getElementById("send").onclick=sendSol;
  </script>
</body>
</html>
